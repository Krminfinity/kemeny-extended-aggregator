{
  "total_tests": 18,
  "passed_tests": 18,
  "failed_tests": 0,
  "pass_rate": 100.0,
  "test_summary": [
    {
      "test_name": "basic_3_candidates",
      "description": "3つの候補者での基本的なケース",
      "input": {
        "subjective_preference": [
          2,
          1,
          0
        ],
        "fitness_scores": [
          0.8,
          0.9,
          0.7
        ],
        "preference_weight": 1.0,
        "fitness_weight": 1.0
      },
      "expected": {
        "ranking": [
          2,
          1,
          0
        ],
        "score": 2.0
      },
      "actual": {
        "ranking": [
          2,
          1,
          0
        ],
        "score": 2.0
      },
      "passed": true
    },
    {
      "test_name": "perfect_alignment",
      "description": "主観的選好と客観的フィット度が完全に一致する場合",
      "input": {
        "subjective_preference": [
          0,
          1,
          2
        ],
        "fitness_scores": [
          0.9,
          0.7,
          0.5
        ],
        "preference_weight": 1.0,
        "fitness_weight": 1.0
      },
      "expected": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": 0.0
      },
      "actual": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": 0.0
      },
      "passed": true
    },
    {
      "test_name": "complete_disagreement",
      "description": "主観的選好と客観的フィット度が完全に逆の場合",
      "input": {
        "subjective_preference": [
          0,
          1,
          2
        ],
        "fitness_scores": [
          0.3,
          0.5,
          0.9
        ],
        "preference_weight": 1.0,
        "fitness_weight": 1.0
      },
      "expected": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": 3.0
      },
      "actual": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": 3.0
      },
      "passed": true
    },
    {
      "test_name": "preference_weighted",
      "description": "主観的選好を重視する場合（重み2倍）",
      "input": {
        "subjective_preference": [
          0,
          1,
          2
        ],
        "fitness_scores": [
          0.3,
          0.5,
          0.9
        ],
        "preference_weight": 2.0,
        "fitness_weight": 1.0
      },
      "expected": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": 3.0
      },
      "actual": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": 3.0
      },
      "passed": true
    },
    {
      "test_name": "fitness_weighted",
      "description": "客観的フィット度を重視する場合（重み2倍）",
      "input": {
        "subjective_preference": [
          0,
          1,
          2
        ],
        "fitness_scores": [
          0.3,
          0.5,
          0.9
        ],
        "preference_weight": 1.0,
        "fitness_weight": 2.0
      },
      "expected": {
        "ranking": [
          2,
          1,
          0
        ],
        "score": 3.0
      },
      "actual": {
        "ranking": [
          2,
          1,
          0
        ],
        "score": 3.0
      },
      "passed": true
    },
    {
      "test_name": "four_candidates",
      "description": "4つの候補者でのより複雑なケース",
      "input": {
        "subjective_preference": [
          3,
          2,
          1,
          0
        ],
        "fitness_scores": [
          0.9,
          0.8,
          0.6,
          0.7
        ],
        "preference_weight": 1.0,
        "fitness_weight": 1.0
      },
      "expected": {
        "ranking": [
          3,
          2,
          1,
          0
        ],
        "score": 5.0
      },
      "actual": {
        "ranking": [
          3,
          2,
          1,
          0
        ],
        "score": 5.0
      },
      "passed": true
    },
    {
      "test_name": "tied_fitness_scores",
      "description": "同点のフィット度スコアがある場合",
      "input": {
        "subjective_preference": [
          0,
          1,
          2
        ],
        "fitness_scores": [
          0.8,
          0.8,
          0.6
        ],
        "preference_weight": 1.0,
        "fitness_weight": 1.0
      },
      "expected": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": 1.0
      },
      "actual": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": 0.0
      },
      "passed": true
    },
    {
      "test_name": "extreme_fitness_difference",
      "description": "極端なフィット度の差がある場合",
      "input": {
        "subjective_preference": [
          0,
          1,
          2
        ],
        "fitness_scores": [
          0.1,
          0.2,
          0.9
        ],
        "preference_weight": 1.0,
        "fitness_weight": 1.0
      },
      "expected": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": 3.0
      },
      "actual": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": 3.0
      },
      "passed": true
    },
    {
      "test_name": "fitness_overrides_preference",
      "description": "フィット度が主観的選好を上回って結果を変えるケース",
      "input": {
        "subjective_preference": [
          0,
          1,
          2,
          3
        ],
        "fitness_scores": [
          0.1,
          0.2,
          0.3,
          0.9
        ],
        "preference_weight": 1.0,
        "fitness_weight": 2.0
      },
      "expected": {
        "ranking": [
          3,
          2,
          1,
          0
        ],
        "score": 8.0
      },
      "actual": {
        "ranking": [
          3,
          2,
          1,
          0
        ],
        "score": 6.0
      },
      "passed": true
    },
    {
      "test_name": "subtle_balance_case",
      "description": "主観的選好とフィット度の微妙なバランスケース",
      "input": {
        "subjective_preference": [
          0,
          1,
          2
        ],
        "fitness_scores": [
          0.3,
          0.7,
          0.4
        ],
        "preference_weight": 1.0,
        "fitness_weight": 1.5
      },
      "expected": {
        "ranking": [
          1,
          2,
          0
        ],
        "score": 2.5
      },
      "actual": {
        "ranking": [
          1,
          2,
          0
        ],
        "score": 2.0
      },
      "passed": true
    },
    {
      "test_name": "strong_fitness_contrast",
      "description": "非常に強いフィット度コントラストがあるケース",
      "input": {
        "subjective_preference": [
          0,
          1,
          2,
          3
        ],
        "fitness_scores": [
          0.05,
          0.1,
          0.15,
          0.95
        ],
        "preference_weight": 1.0,
        "fitness_weight": 3.0
      },
      "expected": {
        "ranking": [
          3,
          2,
          1,
          0
        ],
        "score": 6.0
      },
      "actual": {
        "ranking": [
          3,
          2,
          1,
          0
        ],
        "score": 6.0
      },
      "passed": true
    },
    {
      "test_name": "preference_only",
      "description": "主観的選好のみを考慮（フィット度重み=0）",
      "input": {
        "subjective_preference": [
          0,
          1,
          2
        ],
        "fitness_scores": [
          0.3,
          0.5,
          0.9
        ],
        "preference_weight": 1.0,
        "fitness_weight": 0.0
      },
      "expected": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": 0.0
      },
      "actual": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": 0.0
      },
      "passed": true
    },
    {
      "test_name": "fitness_only",
      "description": "客観的フィット度のみを考慮（選好重み=0）",
      "input": {
        "subjective_preference": [
          0,
          1,
          2
        ],
        "fitness_scores": [
          0.3,
          0.5,
          0.9
        ],
        "preference_weight": 0.0,
        "fitness_weight": 1.0
      },
      "expected": {
        "ranking": [
          2,
          1,
          0
        ],
        "score": 0.0
      },
      "actual": {
        "ranking": [
          2,
          1,
          0
        ],
        "score": 0.0
      },
      "passed": true
    },
    {
      "test_name": "boundary_gap_small_diff",
      "description": "gapモード: 差分が小さいため主観的選好が維持される (0.51 vs 0.50)",
      "input": {
        "subjective_preference": [
          0,
          1,
          2
        ],
        "fitness_scores": [
          0.51,
          0.5,
          0.1
        ],
        "preference_weight": 1.0,
        "fitness_weight": 1.0
      },
      "expected": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": null
      },
      "actual": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": 0.0
      },
      "passed": true
    },
    {
      "test_name": "boundary_gap_medium_diff",
      "description": "gapモード: 中程度差分 (0.60 vs 0.40, 差=0.20) では単一ペア逆転コスト(=1)を上回らないため主観的順保持",
      "input": {
        "subjective_preference": [
          0,
          1,
          2
        ],
        "fitness_scores": [
          0.4,
          0.6,
          0.1
        ],
        "preference_weight": 1.0,
        "fitness_weight": 1.0
      },
      "expected": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": null
      },
      "actual": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": 0.19999999999999996
      },
      "passed": true
    },
    {
      "test_name": "boundary_gap_large_diff",
      "description": "gapモード: 大きな差分 (0.80 vs 0.30, 差=0.50) でも 0.50 < 1 のためまだ逆転せず",
      "input": {
        "subjective_preference": [
          0,
          1,
          2
        ],
        "fitness_scores": [
          0.3,
          0.8,
          0.1
        ],
        "preference_weight": 1.0,
        "fitness_weight": 1.0
      },
      "expected": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": null
      },
      "actual": {
        "ranking": [
          0,
          1,
          2
        ],
        "score": 0.5
      },
      "passed": true
    },
    {
      "test_name": "boundary_gap_tie_vs_third",
      "description": "gapモード: 上位2名接近(0.50 vs 0.49) + 最下位(0.05) 大差でも主観 2>0>1 を覆うには逆転3ペア総和>主観距離必要",
      "input": {
        "subjective_preference": [
          2,
          0,
          1
        ],
        "fitness_scores": [
          0.49,
          0.5,
          0.05
        ],
        "preference_weight": 1.0,
        "fitness_weight": 1.0
      },
      "expected": {
        "ranking": [
          2,
          0,
          1
        ],
        "score": null
      },
      "actual": {
        "ranking": [
          2,
          0,
          1
        ],
        "score": 0.9
      },
      "passed": true
    },
    {
      "test_name": "boundary_gap_three_way",
      "description": "gapモード: 漸次差 (0.70,0.50,0.30) 逆向きでも累積ペナルティ0.80 < 主観距離(3) で逆転せず (閾値示唆)",
      "input": {
        "subjective_preference": [
          2,
          1,
          0
        ],
        "fitness_scores": [
          0.7,
          0.5,
          0.3
        ],
        "preference_weight": 1.0,
        "fitness_weight": 1.0
      },
      "expected": {
        "ranking": [
          2,
          1,
          0
        ],
        "score": null
      },
      "actual": {
        "ranking": [
          2,
          1,
          0
        ],
        "score": 0.7999999999999999
      },
      "passed": true
    }
  ]
}